<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Weatherization</title>
	<style>
		body {
			max-width: 1200px;
			margin: 0 auto 60px !important;
			font-size: 14px;
		}
	</style>

	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

	<link href="https://fonts.googleapis.com/css2?family=Aleo:wght@300;400;700&display=swap" rel="stylesheet" />
	<link rel="stylesheet"
		href="https://tristate.coop/sites/default/files/css/css_Rli8DIVnIKbjfXhlxva1M3yFKBDc26-qMFDXgVLNaEY.css" />

	<link rel="stylesheet" href="assets/css/build.css" />

</head>

<body>
	<main id="main" class="main" role="main" tabindex="-1">

		<div id="wrapper">
			<div class="l-constrain--no-padding">


				<section class="relative min-h-[50vh] z-0 lg:h-[500px] lg:min-h-0">
					<!-- Background Image -->
					<img src="https://placehold.co/1600x500?text=Weatherization+Hero" alt="DESCRIBE_YOUR_IMAGE"
						class="absolute inset-0 w-full h-full object-cover z-0" />
				</section>

				<section class="px-8 py-16 text-center text-balance sm:min-h-[400px] sm:grid sm:place-content-center">
					<div class="mx-auto max-w-2xl space-y-4">
						<h2 class="font-serif font-light text-3xl">
							See if you qualify
						</h2>

						<!-- Main content paragraphs -->
						<p>
							Thank you for your interest in energy efficiency and electrification discounts provided by
							your rural electric cooperative.
						</p>
						<p>
							Please make sure your utility is listed among the electric utilities offering these
							discounts and that you qualify.
						</p>

						<p>
							When you get to the end and hit “submit,” this interest form is sent to your local
							weatherization agency. The
							weatherization agency will contact you to provide more details and a program application.
							They will verify your income
							and may request income documentation.
							If you have questions, please contact your electric utility.
						</p>


						<div>
							<p>This is a table to help you check if you qualify based on your household size.* If you
								make less than the amount listed,
								you qualify! Keep in mind that income thresholds are higher in some areas, so if you
								live in a higher-income area or a
								resort community, you may still qualify.

							</p>
							<p><small>

									*Household members are people who live with you for whom you have financial
									responsibilities, not roommates.
								</small>

							</p>

							<div data-income-lookup>
								<div class="mb-4" data-organizations>
									<template id="member-button">
										<button
											class="cursor-pointer inline-block rounded-full py-2 px-3 border border-solid no-underline leading-none transition-none hover:bg-green/70 hover:text-black"
											style="font-weight: normal; color: #000"></button>
									</template>
									<!-- Buttons will go here -->
								</div>
								<table style="display: none;"
									class="hideme lg:table table-auto border border-gray-500 w-full text-center"
									data-table="desktop">
									<thead>
										<tr class="bg-white">
											<th class="border border-gray-500 py-2 text-right">Household Size</th>
											<th class="border border-gray-500 py-2 text-center">1</th>
											<th class="border border-gray-500 py-2 text-center">2</th>
											<th class="border border-gray-500 py-2 text-center">3</th>
											<th class="border border-gray-500 py-2 text-center">4</th>
											<th class="border border-gray-500 py-2 text-center">5</th>
											<th class="border border-gray-500 py-2 text-center">6</th>
											<th class="border border-gray-500 py-2 text-center">7</th>
											<th class="border border-gray-500 py-2 text-center">8</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<th class="border border-gray-500 py-2 text-right bg-white">Income Threshold
											</th>
											<td class="border py-2 text-center bg-white" data-value></td>
											<td class="border py-2 text-center bg-white" data-value></td>
											<td class="border py-2 text-center bg-white" data-value></td>
											<td class="border py-2 text-center bg-white" data-value></td>
											<td class="border py-2 text-center bg-white" data-value></td>
											<td class="border py-2 text-center bg-white" data-value></td>
											<td class="border py-2 text-center bg-white" data-value></td>
											<td class="border py-2 text-center bg-white" data-value></td>
										</tr>
									</tbody>
								</table>

								<table style="display: none;"
									class="border border-gray-500 w-full max-w-sm min-w-0 mx-auto lg:hideme"
									data-table="mobile">
									<thead>
										<tr class="bg-gray">
											<th class="border border-gray-500 px-4 py-2 text-center">Household Size</th>
											<th class="border border-gray-500 px-4 py-2 text-center">Income Threshold
											</th>
										</tr>
									</thead>
									<tbody class="bg-white">
										<tr>
											<td class="border px-4 py-2">1 Person</td>
											<td class="border px-4 py-2" data-value></td>
										</tr>
										<tr>
											<td class="border px-4 py-2">2 Persons</td>
											<td class="border px-4 py-2" data-value></td>
										</tr>
										<tr>
											<td class="border px-4 py-2">3 Persons</td>
											<td class="border px-4 py-2" data-value></td>
										</tr>
										<tr>
											<td class="border px-4 py-2">4 Persons</td>
											<td class="border px-4 py-2" data-value></td>
										</tr>
										<tr>
											<td class="border px-4 py-2">5 Persons</td>
											<td class="border px-4 py-2" data-value></td>
										</tr>
										<tr>
											<td class="border px-4 py-2">6 Persons</td>
											<td class="border px-4 py-2" data-value></td>
										</tr>
										<tr>
											<td class="border px-4 py-2">7 Persons</td>
											<td class="border px-4 py-2" data-value></td>
										</tr>
										<tr>
											<td class="border px-4 py-2">8 Persons</td>
											<td class="border px-4 py-2" data-value></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</section>
			</div>
		</div>
	</main>

</body>

<script>
	const incomeLookupData = {
		'hea': {
			'label': 'HEA',
			'table': {
				1: '$57,120',
				2: '$65,280',
				3: '$73,440',
				4: '$81,600',
				5: '$90,551',
				6: '$103,041',
				7: '$105,383',
				8: '$108,300',
			},
		},
		'wrea': {
			'label': 'WREA',
			'table': {
				1: '$57,120',
				2: '$65,280',
				3: '$73,440',
				4: '$81,600',
				5: '$90,551',
				6: '$103,041',
				7: '$105,383',
				8: '$108,300',
			},
		},
		'other': {
			'label': 'Other',
			'table': {
				1: '$5,120',
				2: '$6,280',
				3: '$7,440',
				4: '$8,600',
				5: '$9,551',
				6: '$13,041',
				7: '$15,383',
				8: '$18,300',
			},
		}
	}						
</script>

<script>
	// Helper function to create organization buttons
	function helperCreateOrgButtons(container, template, data) {
		Object.keys(data).forEach((orgKey) => {
			const org = data[orgKey];
			const clone = template.content.cloneNode(true);
			const button = clone.querySelector('button');

			button.textContent = org.label;
			button.setAttribute('data-org-key', orgKey);

			container.appendChild(clone);
		});
	}

	// Helper function to populate a single table with income data
	function helperPopulateTable(table, orgData) {
		const cells = table.querySelectorAll('[data-value]');
		cells.forEach((cell, index) => {
			const householdSize = index + 1;
			cell.textContent = orgData.table[householdSize] || '';
		});

		// Show table by removing inline style
		table.style.removeProperty('display');
	}

	// Helper function to handle organization button clicks
	function helperHandleOrgButtonClick(e, desktopTable, mobileTable) {
		if (!e.target.hasAttribute('data-org-key')) return;

		const orgKey = e.target.getAttribute('data-org-key');
		const orgData = incomeLookupData[orgKey];
		if (!orgData) return;

		// Populate both tables
		helperPopulateTable(desktopTable, orgData);
		helperPopulateTable(mobileTable, orgData);
	}

	// Main initialization function
	function initWeatherization() {
		// Guard clause: Check for data
		if (typeof incomeLookupData === 'undefined' || typeof incomeLookupData !== 'object' || Object.keys(incomeLookupData).length === 0) {
			console.error('incomeLookupData is required but not found or empty.');
			return;
		}

		// Guard clause: Check for main container
		const incomeLookup = document.querySelector('[data-income-lookup]');
		if (!incomeLookup) {
			console.error('Main container [data-income-lookup] not found.');
			return;
		}

		// Guard clause: Check for organizations container
		const container = incomeLookup.querySelector('[data-organizations]');
		if (!container) {
			console.error('Container [data-organizations] not found.');
			return;
		}

		// Guard clause: Check for template
		const template = container.querySelector('#member-button');
		if (!template) {
			console.error('Template #member-button not found.');
			return;
		}

		// Guard clause: Check for tables
		const desktopTable = incomeLookup.querySelector('[data-table="desktop"]');
		const mobileTable = incomeLookup.querySelector('[data-table="mobile"]');
		if (!desktopTable || !mobileTable) {
			console.error('Tables not found.');
			return;
		}

		// Create organization buttons
		helperCreateOrgButtons(container, template, incomeLookupData);

		// Add event delegation for button clicks
		container.addEventListener('click', (e) => {
			helperHandleOrgButtonClick(e, desktopTable, mobileTable);
		});
	}

	// Initialize on DOM load
	window.addEventListener('DOMContentLoaded', initWeatherization);
</script>


</html>